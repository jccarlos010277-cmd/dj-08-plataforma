<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJ-08 Automatizada - Plataforma Completa de Declaración Jurada</title>
    <meta name="description" content="Plataforma web para automatizar la Declaración Jurada DJ-08 con calculadora de impuestos mensuales y asistente virtual">
    <meta name="keywords" content="DJ-08, impuestos, Cuba, declaración jurada, TCP, ONAT, calculadora fiscal">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body>
    <!-- Botón de Chatbot -->
    <div class="chatbot-btn" id="chatbotBtn">
        <i class="fas fa-robot"></i>
        <span class="chatbot-pulse"></span>
    </div>

    <!-- Chatbot Modal -->
    <div id="chatbotModal" class="chatbot-modal">
        <div class="chatbot-header">
            <h4><i class="fas fa-robot"></i> Asistente DJ-08</h4>
            <button class="close-chatbot">&times;</button>
        </div>
        <div class="chatbot-body" id="chatbotBody">
            <div class="chatbot-message bot">
                <p>¡Hola! Soy tu asistente para la DJ-08. ¿En qué puedo ayudarte?</p>
                <small>Selecciona una opción:</small>
            </div>
        </div>
        <div class="chatbot-options">
            <button class="chat-option" data-option="seccion-a"><i class="fas fa-chart-line"></i> Sección A: Ingresos</button>
            <button class="chat-option" data-option="seccion-b"><i class="fas fa-calculator"></i> Sección B: Gastos</button>
            <button class="chat-option" data-option="seccion-c"><i class="fas fa-adjust"></i> Ajustes Fiscales</button>
            <button class="chat-option" data-option="impuesto-mensual"><i class="fas fa-calendar-alt"></i> Calculadora Mensual</button>
        </div>
    </div>

    <!-- Banner Carrusel -->
    <div class="hero-banner">
        <div class="hero-slide active" data-slide="1">
            <div class="hero-content">
                <h1 class="animate__animated animate__fadeInDown">DJ-08 Automatizada</h1>
                <p class="animate__animated animate__fadeInUp">Plataforma completa para tu declaración fiscal</p>
                <div class="hero-features">
                    <div class="feature">
                        <i class="fas fa-bolt"></i>
                        <span>Cálculos automáticos</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-shield-alt"></i>
                        <span>Especial para TCP</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-robot"></i>
                        <span>Asistente virtual</span>
                    </div>
                </div>
                <button class="btn-primary" onclick="showSection('dashboard')">
                    Comenzar Ahora <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <div class="hero-slide" data-slide="2">
            <div class="hero-content">
                <h2>Calculadora de Impuesto Mensual</h2>
                <p>Personaliza tus tipos impositivos y calcula mensualmente</p>
                <button class="btn-secondary" onclick="showSection('impuesto-mensual')">
                    Probar Calculadora <i class="fas fa-calculator"></i>
                </button>
            </div>
        </div>

        <div class="hero-slide" data-slide="3">
            <div class="hero-content">
                <h2>Guía Paso a Paso</h2>
                <p>Sigue nuestro asistente para completar tu DJ-08 sin errores</p>
                <button class="btn-tertiary" onclick="iniciarGuia()">
                    Iniciar Guía <i class="fas fa-play-circle"></i>
                </button>
            </div>
        </div>

        <div class="hero-controls">
            <button class="hero-prev" onclick="prevSlide()"><i class="fas fa-chevron-left"></i></button>
            <div class="hero-dots">
                <span class="dot active" data-slide="1"></span>
                <span class="dot" data-slide="2"></span>
                <span class="dot" data-slide="3"></span>
            </div>
            <button class="hero-next" onclick="nextSlide()"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <!-- Encabezado -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <div>
                            <h1>DJ-08<span class="logo-sub">Automatizada</span></h1>
                            <p class="tagline">Declaración Jurada Inteligente</p>
                        </div>
                    </div>
                </div>
                
                <div class="header-nav">
                    <nav>
                        <a href="#" class="nav-link" onclick="showSection('dashboard')"><i class="fas fa-home"></i> Inicio</a>
                        <a href="#" class="nav-link" onclick="showSection('seccion-a')"><i class="fas fa-chart-line"></i> DJ-08</a>
                        <a href="#" class="nav-link" onclick="showSection('impuesto-mensual')"><i class="fas fa-calculator"></i> Calculadora</a>
                        <a href="#" class="nav-link" onclick="showHelp()"><i class="fas fa-question-circle"></i> Ayuda</a>
                    </nav>
                </div>
                
                <div class="user-controls">
                    <div class="tcp-selector">
                        <label class="switch">
                            <input type="checkbox" id="tcpToggle">
                            <span class="slider"></span>
                        </label>
                        <span class="tcp-label">Modo TCP</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Principal -->
    <section id="dashboard" class="dashboard-section active">
        <div class="container">
            <h2 class="section-title"><i class="fas fa-tachometer-alt"></i> Panel de Control</h2>
            
            <div class="dashboard-grid">
                <!-- Tarjeta DJ-08 -->
                <div class="dashboard-card primary-card" onclick="showSection('seccion-a')">
                    <div class="card-icon">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <h3>DJ-08 Completa</h3>
                    <p>Declaración Jurada anual con todas las secciones</p>
                    <div class="card-stats">
                        <span><i class="fas fa-check-circle"></i> 4 secciones</span>
                        <span><i class="fas fa-calculator"></i> Cálculos automáticos</span>
                    </div>
                    <button class="card-btn">Comenzar <i class="fas fa-arrow-right"></i></button>
                </div>

                <!-- Tarjeta Calculadora -->
                <div class="dashboard-card secondary-card" onclick="showSection('impuesto-mensual')">
                    <div class="card-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3>Calculadora Mensual</h3>
                    <p>Calcula y personaliza tus impuestos mensuales</p>
                    <div class="card-stats">
                        <span><i class="fas fa-sliders-h"></i> Personalizable</span>
                        <span><i class="fas fa-chart-bar"></i> Gráficos</span>
                    </div>
                    <button class="card-btn">Usar Calculadora <i class="fas fa-calculator"></i></button>
                </div>

                <!-- Tarjeta Guía -->
                <div class="dashboard-card tertiary-card" onclick="iniciarGuia()">
                    <div class="card-icon">
                        <i class="fas fa-compass"></i>
                    </div>
                    <h3>Guía Paso a Paso</h3>
                    <p>Asistente para completar tu DJ-08 sin errores</p>
                    <div class="card-stats">
                        <span><i class="fas fa-robot"></i> Asistente IA</span>
                        <span><i class="fas fa-list-ol"></i> 10 pasos</span>
                    </div>
                    <button class="card-btn">Iniciar Guía <i class="fas fa-play"></i></button>
                </div>

                <!-- Tarjeta Recursos -->
                <div class="dashboard-card accent-card" onclick="showHelp()">
                    <div class="card-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Recursos y Ayuda</h3>
                    <p>Normativas, tutoriales y preguntas frecuentes</p>
                    <div class="card-stats">
                        <span><i class="fas fa-gavel"></i> Normativas</span>
                        <span><i class="fas fa-video"></i> Tutoriales</span>
                    </div>
                    <button class="card-btn">Explorar <i class="fas fa-book-open"></i></button>
                </div>
            </div>

            <!-- Estadísticas Rápidas -->
            <div class="quick-stats">
                <h3><i class="fas fa-chart-line"></i> Estadísticas Rápidas</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <i class="fas fa-users"></i>
                        <div>
                            <h4>500+</h4>
                            <p>Usuarios activos</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-file-alt"></i>
                        <div>
                            <h4>1,200+</h4>
                            <p>Declaraciones generadas</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-percentage"></i>
                        <div>
                            <h4>95%</h4>
                            <p>Precisión en cálculos</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <h4>30 min</h4>
                            <p>Tiempo promedio ahorrado</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Calculadora de Impuesto Mensual -->
    <section id="impuesto-mensual" class="form-section">
        <div class="container">
            <h2 class="section-title"><i class="fas fa-calculator"></i> Calculadora de Impuesto Mensual</h2>
            <p class="section-subtitle">Personaliza tus tipos impositivos y calcula mensualmente</p>
            
            <div class="calculator-grid">
                <!-- Configuración de Impuestos -->
                <div class="calculator-card">
                    <h3><i class="fas fa-sliders-h"></i> Configurar Impuestos</h3>
                    
                    <div class="taxes-list" id="taxesList">
                        <!-- Impuestos se añadirán dinámicamente -->
                    </div>
                    
                    <div class="add-tax-form">
                        <h4><i class="fas fa-plus-circle"></i> Añadir Nuevo Impuesto</h4>
                        <div class="form-row">
                            <input type="text" id="taxName" placeholder="Nombre del impuesto (ej: IS)" class="form-control">
                            <input type="number" id="taxRate" placeholder="Tasa %" step="0.1" min="0" max="100" class="form-control">
                            <button class="btn-add" onclick="addTax()"><i class="fas fa-plus"></i> Añadir</button>
                        </div>
                    </div>
                    
                    <div class="preset-taxes">
                        <h4><i class="fas fa-star"></i> Tasas Predefinidas</h4>
                        <div class="preset-grid">
                            <button class="preset-btn" data-rate="35" onclick="setPresetTax('IS General', 35)">
                                <span>IS General</span>
                                <small>35%</small>
                            </button>
                            <button class="preset-btn" data-rate="30" onclick="setPresetTax('IS TCP Básico', 30)">
                                <span>TCP Básico</span>
                                <small>30%</small>
                            </button>
                            <button class="preset-btn" data-rate="25" onclick="setPresetTax('IS Reducido', 25)">
                                <span>Reducido</span>
                                <small>25%</small>
                            </button>
                            <button class="preset-btn" data-rate="10" onclick="setPresetTax('Ventas', 10)">
                                <span>Ventas</span>
                                <small>10%</small>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Calculadora -->
                <div class="calculator-card">
                    <h3><i class="fas fa-calculator"></i> Calculadora Mensual</h3>
                    
                    <div class="form-group">
                        <label for="monthlyIncome"><i class="fas fa-money-bill-wave"></i> Ingreso Mensual:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-dollar-sign"></i>
                            <input type="number" id="monthlyIncome" placeholder="0.00" step="0.01" min="0" 
                                   oninput="calculateMonthlyTax()">
                        </div>
                    </div>
                    
                    <div class="month-selector">
                        <label>Mes a calcular:</label>
                        <select id="monthSelect" onchange="calculateMonthlyTax()">
                            <option value="1">Enero</option>
                            <option value="2">Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    
                    <div class="results-monthly">
                        <h4><i class="fas fa-chart-pie"></i> Desglose Mensual</h4>
                        <div class="result-item">
                            <span>Ingreso Bruto:</span>
                            <span id="monthlyGross">$0.00</span>
                        </div>
                        <div class="tax-breakdown" id="taxBreakdown">
                            <!-- Desglose de impuestos se añadirá aquí -->
                        </div>
                        <div class="result-item total">
                            <span>Total Impuestos:</span>
                            <span id="monthlyTaxTotal">$0.00</span>
                        </div>
                        <div class="result-item net">
                            <span>Ingreso Neto:</span>
                            <span id="monthlyNet">$0.00</span>
                        </div>
                    </div>
                </div>
                
                <!-- Resumen Anual -->
                <div class="calculator-card">
                    <h3><i class="fas fa-calendar-alt"></i> Proyección Anual</h3>
                    
                    <div class="annual-summary">
                        <div class="annual-item">
                            <i class="fas fa-chart-line"></i>
                            <div>
                                <h5>Ingreso Anual</h5>
                                <p id="annualIncome">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="annual-item">
                            <i class="fas fa-money-bill-wave"></i>
                            <div>
                                <h5>Impuestos Anuales</h5>
                                <p id="annualTax">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="annual-item">
                            <i class="fas fa-percentage"></i>
                            <div>
                                <h5>Tasa Efectiva</h5>
                                <p id="effectiveRate">0%</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="taxChart"></canvas>
                    </div>
                    
                    <div class="export-options">
                        <button class="btn-export" onclick="exportMonthlyReport()">
                            <i class="fas fa-file-excel"></i> Exportar Reporte
                        </button>
                        <button class="btn-compare" onclick="compareScenarios()">
                            <i class="fas fa-balance-scale"></i> Comparar Escenarios
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="section-navigation">
                <button class="btn-prev" onclick="showSection('dashboard')">
                    <i class="fas fa-arrow-left"></i> Volver al Dashboard
                </button>
            </div>
        </div>
    </section>

    <!-- Aquí continúan las secciones originales de DJ-08 (sección A, B, C, D) -->
    <!-- Mantén el mismo código que ya tienes, pero asegúrate de añadir la clase "form-section" -->
    
    <!-- Modal Comparación de Escenarios -->
    <div id="compareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-balance-scale"></i> Comparar Escenarios</h3>
                <button class="close-modal" onclick="closeCompareModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="compare-grid" id="compareGrid">
                    <!-- Escenarios se añadirán dinámicamente -->
                </div>
                <button class="btn-add-scenario" onclick="addScenario()">
                    <i class="fas fa-plus"></i> Añadir Nuevo Escenario
                </button>
            </div>
        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-file-invoice-dollar"></i> DJ-08 Automatizada</h4>
                    <p>Plataforma completa para gestión fiscal en Cuba</p>
                </div>
                <div class="footer-section">
                    <h4>Enlaces Rápidos</h4>
                    <a href="#" onclick="showSection('dashboard')">Dashboard</a>
                    <a href="#" onclick="showSection('seccion-a')">DJ-08</a>
                    <a href="#" onclick="showSection('impuesto-mensual')">Calculadora</a>
                    <a href="#" onclick="showHelp()">Ayuda</a>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p><i class="fas fa-envelope"></i> soporte@dj08.com</p>
                    <p><i class="fas fa-phone"></i> +53 123 456 7890</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>DJ-08 Automatizada - Versión 2.0 © 2024</p>
                <p class="footer-note">Esta herramienta es de apoyo y no sustituye la asesoría profesional.</p>
            </div>
        </div>
    </footer>

    <!-- Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script src="chatbot.js"></script>
    <script src="calculator.js"></script>
</body>
</html>
